<extend name="Index/base" />

<block name="title">商品管理 - wederful后台管理系统</block>

<block name="global">
    <script>
        var global = {
            localUrl:'{:U("Index/goodsManage")}', // 页面基本地址
            cityListUrl:'{:U("Product/getCityList")}/countryid',
            countryid:'{$countryid}', // 当前城市
            destinationid:'{$destinationid}', // 当前目的地
            keywords:'{$keywords}', // 当前搜索关键字
            isShowUrl:'{:U("Product/isShow")}',
            delProductUrl:'{:U("Product/delProduct")}',
        };
    </script>
</block>

<block name="main-class">
    <main class="main bb pr page_goods">
</block>

<block name="main">
    <!-- 导航栏 -->
    <div class="con-nav i-lh30 i-bcm h30 p10 mb20 c">
        <nav class="fl">
            <a href="{:U('Index/index/')}">首页</a>
            <a href="{:U('Index/goodsManage/')}">商品管理</a>
        </nav>
        <div class="fr c">
            <!-- 第一个不需要 class ml20 -->
            <label class="nav-search fl">
                <input class="search-list goods-search-ipt i-input i-b1m fl" type="text" />
                <button class="goods-search-btn i-button fl" type="botton">搜索</button>
            </label>
            <a href="{:U('addproduct/step1')}" class="i-button i-b-mw fl ml20">新增商品</a>
        </div>
    </div>
    <!-- 搜索区域 select 集 -->
    <div class="mb20 c">
        <select class="area-search-a i-select fl mr10" name="country">
            <option value="null">选择地区</option>
            <volist name="destinationData" id="data">
                <option value="{$data.id}">{$data.name}</option>
            </volist>
        </select>
        <if condition="$cityList">
            <select class="area-search-b i-select fl" name="destination">
                <option value="null">选择地区</option>
                <volist name="cityList" id="city">
                    <option value="{$city.id}">{$city.name}</option>
                </volist>
            </select>
        </if>
    </div>
    <!-- 结果展示区域 table -->
    <table class="i-table mb20 w1">
        <thead>
            <tr>
                <th>商品编号</th>
                <th>商品类型</th>
                <th>服务商</th>
                <th>服务项</th>
                <th>商品名称</th>
                <th>所在地</th>
                <th>起始价格</th>
                <!-- <th>访问数</th> -->
                <th>收藏数</th>
                <th>购买数</th>
                <!-- <th>创建时间</th> -->
                <th>创建人</th>
                <!-- <th>促销</th> -->
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <volist name="result" id="data">
                <tr>
                    <td>{$data.product_no}</td>
                    <td>商品类型</td>
                    <td>服务商</td>
                    <td>服务项</td>
                    <td class="goods-name">{$data.name}</td>
                    <!--自定义标签-->
                    <td><ExtendsTags:getregion destination="data.destination_id"/></td>
                    <td><notempty name="data.startPrice">${$data.startPrice}<else />0</notempty></td>
                    <!-- <td>{$data.visit_num}</td> -->
                    <td>{$data.collect_num}</td>
                    <td>{$data.sale_num}</td>
                    <!-- <td>{$data.createtime}</td> -->
                    <td><ExtendsTags:getusername uid="data.create_uid"/></td>
                    <!-- <td>{$data.product_no}</td> -->
                    <td>
                        <div>
                            <!-- <a target="_blank" href="{:U('/Home/Index/productDetail')}/pid/{$data.id}">查看</a> -->
                            <a class="dlb mr30" target="_blank" href="###">删除</a>
                            <a class="dlb" href="{:U('editproduct/step1')}/pid/{$data.id}" target="_blank">编辑</a>
                        </div>
                        <div>
                            <span class="goods-release dlb cp mr30" data-id="{$data.id}"><if condition="$data.is_show eq '1'">取消发布<else />发布</if></span>
                            <!-- <span class="goods-del fr cp" data-id="{$data.id}">删除</span> -->
                            <span class="goods-del cp" data-id="###">复制</span>
                        </div>
                    </td>
                </tr>
            </volist>
        </tbody>
    </table>
    <!-- 分页 paging -->
    <div class="con-paging mb20 c h30 i-lh30">
        <dl class="fl mr20">
            <dt class="dlb">商品数：</dt>
            <dd class="dlb">{$totalSize}</dd>
        </dl>
        <div class="fl mr20">
            <span>当前页：</span>
            <div class="dlb">
                <i data-role="p-dir" data-p="{$nowPage-1}" class="paging-dir goods-paging-dir {$nowPage==1?'disable':''}">&lt;</i>
                <span class="paging-now">{$nowPage}</span>
                <i data-role="p-dir" data-p="{$nowPage+1}" class="paging-dir goods-paging-dir {$nowPage==$totalPage?'disable':''}">&gt;</i>
            </div>
        </div>
        <div class="fl">
            转到
            <select data-role="p-go" class="goods-paging-sel i-select">
                <for start="1" end="$totalPage+1">
                    <if condition="$nowPage eq $i ">
                        <option value="{$i}" selected="selected">{$i}</option>
                    <else />
                         <option value="{$i}">{$i}</option>
                    </if>
                </for>
            </select>
            页
        </div>
    </div>
</block>