<extend name="Index/base" />
<block name="title">编辑商品 - wederful后台管理系统</block>
<block name="global">
    <script>
        var global = {
            cityListUrl:'{:U("Product/getCityList")}/countryid',
            addVendorsUrl:'{:U("Product/addVendors")}',
            getVendorDetailUrl:'{:U("Product/getVendorDetail")}',
            getCategoryAttrUrl:'{:U("Product/getCategoryAttr")}',
            getChildrenCategoryUrl:'{:U("Product/getChildrenCategory")}',
            qiniuUploadTokenUrl:'{:U("Product/qiniuUploadToken")}'
        };
    </script>
</block>
<block name="main-class">
    <main class="main bb pr page_goods">
</block>
<block name="main">
    <!-- 导航栏 -->
    <div class="con-nav i-lh30 i-bcm p10 mb20 c">
        <nav class="fl">
            <a href="{:U('Index/index/')}">后台</a>
            <a href="{:U('Index/goodsManage/')}">商品管理</a>
            <a href="#">商品信息</a>
            <a href="#">添加商品</a>
            <a href="#">{$proData.name}</a>
        </nav>
    </div>
    <!-- *************************** -->
    <!-- 查看/添加 商家 template -->
    <div class="add-merchant-tpl none">
        <div class="m-add-merchant m-add-box dlb r4 bcf">
            <label class="db mb10">
                <span>商家中文名</span>
                <input name="name" class="save-item i-input" type="text" />
            </label>
            <label class="db mb20">
                <span>商家英文名</span>
                <input name="name_en" class="save-item i-input" type="text" />
            </label>
            <div class="db">
                <span class="left-label">商家Logo</span>
                <div class="dlb c">
                    <figure class="load-img-wrap none">
                        <img class="merchant-logo" src="" />
                        <input class="save-item" name="icon" type="hidden" />
                        <span class="goods-img-del">x</span>
                    </figure>
                    <span data-num="1" data-rule="random" class="add-img" data-name="icon"></span>
                </div>
            </div>
            <label class="db mb10">
                <span>商家地址</span>
                <input name="address" class="save-item i-input" type="text" />
            </label>
            <label class="db mb10">
                <span>联系人</span>
                <input name="contacts" class="save-item i-input" type="text" />
            </label>
            <label class="db mb10">
                <span>联系电话</span>
                <input name="mobile" class="save-item i-input" type="text" />
            </label>
            <label class="db mb10">
                <span>联系邮箱</span>
                <input name="email" class="save-item i-input" type="text" />
            </label>
            <label class="db mb5">
                <span>其他</span>
                <textarea name="other" class="save-item i-textarea bb"></textarea>
            </label>
            <label class="db mb10">
                <span>&emsp;</span>
                <span class="i-error">&emsp;</span>
            </label>
            <div class="db mb10">
                <span>&emsp;</span>
                <div class="dlb">
                    <button class="save-merchant i-button i-b-mw mr20" type="bubtton">保存</button>
                    <button class="close-mask i-button i-b-mw" type="bubtton">关闭</button>
                </div>
            </div>
        </div>
    </div>
    <!-- *************************** -->
    <form action="{:U('Product/editSaveStepOne')}/pid/{$productId}" method="POST" autocomplete="off">
        <input type="hidden" name="pid" value="{$proData.id}">
        <!-- 内容展示 -->
        <table class="con-show w1">
            <tbody>
                <!-- 基本信息 -->
                <tr>
                    <td colspan="3" class="mb10 fs20 fc3 mr30">基本信息</td>
                </tr>
                <tr>
                    <td>商品名称</td>
                    <td><input class="i-input i-w-short" type="text" placeholder="中文名" name="name" value="{$proData.name}"/></td>
                    <td><input class="i-input i-w-short" type="text" placeholder="英文名" name="name_en" value="{$proData.name_en}"/></td>
                </tr>
                <tr>
                    <td>商品所在地区</td>
                    <td>
                        <select class="select-area-a i-select i-w-short i-mr10" name="regional_id">
                            <option value="null">选择地区</option>
                            <volist name="destinationData" id="data">
                                <if condition="$data.id eq $regionalid">
                                    <option value="{$data.id}" selected="selected">{$data.name}</option>
                                <else />
                                    <option value="{$data.id}">{$data.name}</option>
                                </if>
                            </volist>
                        </select>
                    </td>
                    <td>
                    <select class="select-area-b i-select i-w-short <empty name='cityList'>none</empty>" name="destination_id">
                        <option value="null">选择地区</option>
                        <volist name="cityList" id="city">
                            <if condition="$city.id eq $destinationId">
                                <option value="{$city.id}" selected="selected">{$city.name}</option>
                            <else />
                                <option value="{$city.id}">{$city.name}</option>
                            </if>
                        </volist>
                    </select>
                    </td>
                </tr>
                <tr>
                    <td>商家名称</td>
                    <td class="c">
                        <select class="select-merchant i-select i-w-short vat i-mr10 fl" name="vendors_id">
                            <option value="null">选择商家</option>
                            <volist name="vendors" id="vendor">
                                <if condition="$vendor.id eq $vendorId">
                                    <option value="{$vendor.id}" selected="selected">{$vendor.name}</option>
                                <else />
                                    <option value="{$vendor.id}">{$vendor.name}</option>
                                </if>
                            </volist>
                        </select>
                    </td>
                    <td>
                        <button class="check-merchant i-button i-b-mw mr20" type="button">查看</button>
                        <button class="add-merchant i-button i-b-mw" type="button">添加</button>
                    </td>
                </tr>
                <tr>
                    <td>商品分类</td>
                    <td>
                        <select class="choice-category-a i-select i-w-short" name="category_id">
                            <option value="null">选择分类</option>
                            <volist name="categorys" id="data">
                                <if condition="$data.id eq $categoryId">
                                    <option value="{$data.id}" selected="selected">{$data.name}</option>
                                <else />
                                    <option value="{$data.id}">{$data.name}</option>
                                </if>
                            </volist>
                        </select>
                    </td>
                    <td>

                    </td>
                </tr>
                <tr>
                    <td>商品属性</td>
                    <td colspan="2" class="goods-attr fs0">
                        <section class="category-wrap fs14">
                            <volist name="attrData" id="attr">
                                <div class="mb10 c">
                                    <span class="vat fl">{$attr.name}：</span>
                                    <if condition="$attr.type eq 'textarea'">
                                        <textarea class="i-textarea i-w-short bb" name="attr[{$attr.id}]">{$attr.value}</textarea>
                                    <elseif condition="$attr.type eq 'input'"/>
                                        <input type="text" class="i-input i-w-short" name="attr[{$attr.id}]" value="{$attr.value}">
                                    <elseif condition="$attr.type eq 'radio'"/>
                                        <div style="width: 80%; float: left">
                                        <volist name="attr.options" id="op">
                                            <label class="dlb mr20">
                                            <if condition="$attr.value eq $op['id']">
                                                <input type="radio" checked="checked" value="{$op.id}" class="mr5" name="attr[{$attr.id}]">{$op.option}</label>
                                                <else />
                                                <input type="radio" value="{$op.id}" class="mr5" name="attr[{$attr.id}]">{$op.option}</label>
                                            </if>
                                        </volist>
                                        </div>
                                    <elseif condition="$attr.type eq 'checkbox'"/>
                                        <div style="width: 80%; float: left">
                                        <volist name="attr.options" id="op">
                                            <label class="dlb mr20">
                                                <input type="checkbox" <volist name="attr.value" id="v"><if condition="$v eq $op['id']">checked="checked"</if></volist> value="{$op.id}" class="mr5" name="attr[{$attr.id}][]">
                                                {$op.option}
                                            </label>
                                        </volist>
                                        </div>
                                    <elseif condition="$attr.type eq 'select'"/>
                                        <select class="i-select i-w-short" name="attr[{$attr.id}]">
                                            <volist name="attr.options" id="op">
                                                <if condition="$attr.value eq $op['id']">
                                                    <option value="{$op.id}" selected="selected">{$op.option}</option>
                                                <else />
                                                    <option value="{$op.id}">{$op.option}</option>
                                                </if>
                                            </volist>
                                        </select>
                                    </if>
                                </div>
                            </volist>
                        </section>
                    </td>
                </tr>
                <tr>
                    <td>商品描述</td>
                    <td>
                        <textarea class="edit-dom i-textarea i-w-long" placeholder="商品中文描述" name="description">{$proData.description}</textarea>
                    </td>
                    <td>
                        <textarea class="edit-dom i-textarea i-w-long" placeholder="商品英文描述" name="description_en">{$proData.description_en}</textarea>
                    </td>
                </tr>
            </tbody>
        </table>
        <!-- 产品操作 -->
        <div class="con-operation tac pt20 mb30">
            <button class="i-button i-b-mw">保存 / 下一步</button>
        </div>
    </form>
</block>